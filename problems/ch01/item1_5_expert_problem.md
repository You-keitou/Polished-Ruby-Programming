# 第1章 1.5 (Expert): IdentitySet

## 問題：最新状態を維持する集合

あなたはリアルタイムゲームのサーバーサイドを開発しています。
クライアントから送られてくるアイテム情報（`Item`オブジェクト）をメモリ上のセットで管理したいです。

### 要件
1.  **IDによる同一性**: `Item` は `id` と `version` を持ちます。`id` が同じなら「同じアイテム」とみなします。
2.  **LWW (Last Write Wins)**: セットにアイテムを追加する際、すでに同じ `id` のアイテムが存在する場合、**新しいインスタンス（バージョンが進んでいるかもしれない）で上書き**してください。
    - 標準の `Set#add` は「既存のものを維持」するため、これとは逆の挙動が必要です。
3.  **高速な検索**: `include?` や `find` は `id` を使って O(1) で行える必要があります。

### 課題
`lib/ch01/item1_5_expert.rb` にある `IdentitySet` クラスを実装してください。
内部データ構造として `Hash` をラップして使うのが定石です。

### 警告
`Item` クラスの `hash` と `eql?` の実装にも注意してください。
前の問題であなたが書いた `eql?` (ハッシュ値の比較) は、ハッシュ衝突時にバグを引き起こすため、ここでは修正が必要です。
