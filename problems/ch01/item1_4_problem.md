# 第1章 1.4: シンボルと文字列の違いを理解する

## 問題：安全なパラメータ正規化 (SafeParams)

あなたはWebフレームワークのコア開発者です。
HTTPリクエストから送られてくる大量のパラメータ（Hash）を処理するクラス `SafeParams` を設計しています。

### 現在の問題点
ユーザーからの入力はすべて文字列キーですが、アプリケーション内部ではシンボルでアクセスしたいという要望があります。
しかし、単純に `symbolize_keys` すると、悪意のある攻撃者が大量のランダムなキーを送ってきた場合にメモリが枯渇します（Symbol DoS）。

### 課題
`lib/ch01/item1_4.rb` にある `SafeParams` クラスを修正し、以下の要件を満たしてください。

1.  **許可されたキーのみシンボル化**:
    - `permit` メソッドで許可されたキーだけを内部データとして保持します。
    - 許可されたキーについては、内部的に **シンボル** として保持してください（高速化のため）。
2.  **許可されていないキーの排除**:
    - 許可されていないキーが含まれていた場合、それは無視（削除）してください。
3.  **文字列の重複排除**:
    - 値（Values）が文字列の場合、Ruby 2.5+ の `String#-@` (deduplication) を使ってメモリ使用量を最適化してください。
4.  **アクセスの柔軟性**:
    - `params[:key]` (Symbol) でも `params['key']` (String) でも値が取れるようにしてください。

### ヒント
- `Hash#slice` (ActiveSupportなしで実装できますか？)
- `String#-@` (単項マイナス)
- `Hash#[]` のオーバーライド

この課題は、Railsの `ActionController::Parameters` の簡易版を作ることに近いです。
